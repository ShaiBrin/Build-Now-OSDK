{"version":3,"file":"wireObjectTypeFullMetadataToSdkObjectMetadata.js","names":["wirePropertyV2ToSdkPrimaryKeyTypeDefinition","wirePropertyV2ToSdkPropertyDefinition","wireObjectTypeFullMetadataToSdkObjectMetadata","objectTypeWithLink","v2","objectType","properties","primaryKey","undefined","Error","apiName","implementsInterfaces2","implementsInterfaces","interfaceMap","Object","fromEntries","entries","map","interfaceApiName","impl","type","description","primaryKeyApiName","primaryKeyType","links","linkTypes","linkType","multiplicity","cardinality","targetType","objectTypeApiName","key","value","implements","inverseInterfaceMap","props","invertProps","icon","supportedIconTypes","includes","titleProperty","displayName","pluralDisplayName","status","rid","visibility","a","k","v"],"sources":["wireObjectTypeFullMetadataToSdkObjectMetadata.js"],"sourcesContent":["/*\n * Copyright 2023 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { wirePropertyV2ToSdkPrimaryKeyTypeDefinition } from \"./wirePropertyV2ToSdkPrimaryKeyTypeDefinition.js\";\nimport { wirePropertyV2ToSdkPropertyDefinition } from \"./wirePropertyV2ToSdkPropertyDefinition.js\";\nexport function wireObjectTypeFullMetadataToSdkObjectMetadata(objectTypeWithLink, v2) {\n    if (objectTypeWithLink.objectType\n        .properties[objectTypeWithLink.objectType.primaryKey] === undefined) {\n        throw new Error(`Primary key ${objectTypeWithLink.objectType.primaryKey} not found in ${objectTypeWithLink.objectType.apiName}`);\n    }\n    // saved ontology.json files may not have this implementsInterfaces2 so we need to handle\n    if (objectTypeWithLink.implementsInterfaces2 == null\n        && objectTypeWithLink.implementsInterfaces != null) {\n        throw new Error(\"Your ontology.json file is missing the implementsInterfaces2 field. Please regenerate it.\");\n    }\n    const interfaceMap = objectTypeWithLink.implementsInterfaces2\n        ? Object.fromEntries(Object.entries(objectTypeWithLink.implementsInterfaces2).map(([interfaceApiName, impl]) => [interfaceApiName, impl.properties]))\n        : {};\n    return {\n        type: \"object\",\n        apiName: objectTypeWithLink.objectType.apiName,\n        description: objectTypeWithLink.objectType.description,\n        primaryKeyApiName: objectTypeWithLink.objectType.primaryKey,\n        primaryKeyType: wirePropertyV2ToSdkPrimaryKeyTypeDefinition(objectTypeWithLink.objectType\n            .properties[objectTypeWithLink.objectType.primaryKey]),\n        links: Object.fromEntries(objectTypeWithLink.linkTypes.map(linkType => {\n            return [linkType.apiName, {\n                    multiplicity: linkType.cardinality === \"MANY\",\n                    targetType: linkType.objectTypeApiName,\n                }];\n        })),\n        properties: Object.fromEntries(Object.entries(objectTypeWithLink.objectType.properties).map(([key, value]) => [\n            key,\n            wirePropertyV2ToSdkPropertyDefinition(value, !(v2 && objectTypeWithLink.objectType.primaryKey === key)),\n        ])),\n        implements: objectTypeWithLink.implementsInterfaces,\n        interfaceMap,\n        inverseInterfaceMap: Object.fromEntries(Object.entries(interfaceMap).map(([interfaceApiName, props]) => [interfaceApiName, invertProps(props)])),\n        icon: supportedIconTypes.includes(objectTypeWithLink.objectType.icon.type)\n            ? objectTypeWithLink.objectType.icon\n            : undefined,\n        titleProperty: objectTypeWithLink.objectType.titleProperty,\n        displayName: objectTypeWithLink.objectType.displayName,\n        pluralDisplayName: objectTypeWithLink.objectType.pluralDisplayName,\n        status: objectTypeWithLink.objectType.status,\n        rid: objectTypeWithLink.objectType.rid,\n        visibility: objectTypeWithLink.objectType.visibility,\n    };\n}\nfunction invertProps(a) {\n    return (a\n        ? Object.fromEntries(Object.entries(a).map(([k, v]) => [v, k]))\n        : undefined);\n}\nconst supportedIconTypes = [\"blueprint\"];\n"],"mappings":"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","ignoreList":[]}