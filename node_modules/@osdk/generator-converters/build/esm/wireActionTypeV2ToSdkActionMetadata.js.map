{"version":3,"file":"wireActionTypeV2ToSdkActionMetadata.js","names":["getModifiedEntityTypes","wireActionTypeV2ToSdkActionMetadata","input","modifiedEntityTypes","type","apiName","parameters","Object","fromEntries","entries","map","key","value","wireActionParameterV2ToSdkParameterDefinition","displayName","description","modifiedEntities","createModifiedEntities","addedObjects","modifiedObjects","rid","status","multiplicity","dataType","actionPropertyToSdkPropertyDefinition","subType","nullable","required","parameterType","objectSet","objectTypeApiName","object","entities","created","modified"],"sources":["wireActionTypeV2ToSdkActionMetadata.js"],"sourcesContent":["/*\n * Copyright 2023 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getModifiedEntityTypes } from \"./getEditedEntities.js\";\nexport function wireActionTypeV2ToSdkActionMetadata(input) {\n    const modifiedEntityTypes = getModifiedEntityTypes(input);\n    return {\n        type: \"action\",\n        apiName: input.apiName,\n        parameters: Object.fromEntries(Object.entries(input.parameters).map(([key, value]) => [key, wireActionParameterV2ToSdkParameterDefinition(value)])),\n        displayName: input.displayName,\n        description: input.description,\n        modifiedEntities: createModifiedEntities(modifiedEntityTypes.addedObjects, modifiedEntityTypes.modifiedObjects),\n        rid: input.rid,\n        status: input.status,\n    };\n}\nfunction wireActionParameterV2ToSdkParameterDefinition(value) {\n    return {\n        multiplicity: value.dataType.type === \"array\",\n        type: actionPropertyToSdkPropertyDefinition(value.dataType.type === \"array\" ? value.dataType.subType : value.dataType),\n        nullable: !value.required,\n        description: value.description,\n    };\n}\nfunction actionPropertyToSdkPropertyDefinition(parameterType) {\n    switch (parameterType.type) {\n        case \"string\":\n        case \"boolean\":\n        case \"attachment\":\n        case \"double\":\n        case \"integer\":\n        case \"long\":\n        case \"timestamp\":\n        case \"marking\":\n            return parameterType.type;\n        case \"date\":\n            return \"datetime\";\n        case \"objectSet\":\n            return { type: \"objectSet\", objectSet: parameterType.objectTypeApiName };\n        case \"object\":\n            return { type: \"object\", object: parameterType.objectTypeApiName };\n        case \"array\":\n            return actionPropertyToSdkPropertyDefinition(parameterType.subType);\n    }\n}\nfunction createModifiedEntities(addedObjects, modifiedObjects) {\n    let entities = {};\n    for (const key of addedObjects) {\n        entities[key] = { created: true, modified: false };\n    }\n    for (const key of modifiedObjects) {\n        if (entities[key]) {\n            entities[key].modified = true;\n        }\n        else {\n            entities[key] = { created: false, modified: true };\n        }\n    }\n    return entities;\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,sBAAsB,QAAQ,wBAAwB;AAC/D,OAAO,SAASC,mCAAmCA,CAACC,KAAK,EAAE;EACvD,MAAMC,mBAAmB,GAAGH,sBAAsB,CAACE,KAAK,CAAC;EACzD,OAAO;IACHE,IAAI,EAAE,QAAQ;IACdC,OAAO,EAAEH,KAAK,CAACG,OAAO;IACtBC,UAAU,EAAEC,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACP,KAAK,CAACI,UAAU,CAAC,CAACI,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK,CAACD,GAAG,EAAEE,6CAA6C,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC;IACnJE,WAAW,EAAEZ,KAAK,CAACY,WAAW;IAC9BC,WAAW,EAAEb,KAAK,CAACa,WAAW;IAC9BC,gBAAgB,EAAEC,sBAAsB,CAACd,mBAAmB,CAACe,YAAY,EAAEf,mBAAmB,CAACgB,eAAe,CAAC;IAC/GC,GAAG,EAAElB,KAAK,CAACkB,GAAG;IACdC,MAAM,EAAEnB,KAAK,CAACmB;EAClB,CAAC;AACL;AACA,SAASR,6CAA6CA,CAACD,KAAK,EAAE;EAC1D,OAAO;IACHU,YAAY,EAAEV,KAAK,CAACW,QAAQ,CAACnB,IAAI,KAAK,OAAO;IAC7CA,IAAI,EAAEoB,qCAAqC,CAACZ,KAAK,CAACW,QAAQ,CAACnB,IAAI,KAAK,OAAO,GAAGQ,KAAK,CAACW,QAAQ,CAACE,OAAO,GAAGb,KAAK,CAACW,QAAQ,CAAC;IACtHG,QAAQ,EAAE,CAACd,KAAK,CAACe,QAAQ;IACzBZ,WAAW,EAAEH,KAAK,CAACG;EACvB,CAAC;AACL;AACA,SAASS,qCAAqCA,CAACI,aAAa,EAAE;EAC1D,QAAQA,aAAa,CAACxB,IAAI;IACtB,KAAK,QAAQ;IACb,KAAK,SAAS;IACd,KAAK,YAAY;IACjB,KAAK,QAAQ;IACb,KAAK,SAAS;IACd,KAAK,MAAM;IACX,KAAK,WAAW;IAChB,KAAK,SAAS;MACV,OAAOwB,aAAa,CAACxB,IAAI;IAC7B,KAAK,MAAM;MACP,OAAO,UAAU;IACrB,KAAK,WAAW;MACZ,OAAO;QAAEA,IAAI,EAAE,WAAW;QAAEyB,SAAS,EAAED,aAAa,CAACE;MAAkB,CAAC;IAC5E,KAAK,QAAQ;MACT,OAAO;QAAE1B,IAAI,EAAE,QAAQ;QAAE2B,MAAM,EAAEH,aAAa,CAACE;MAAkB,CAAC;IACtE,KAAK,OAAO;MACR,OAAON,qCAAqC,CAACI,aAAa,CAACH,OAAO,CAAC;EAC3E;AACJ;AACA,SAASR,sBAAsBA,CAACC,YAAY,EAAEC,eAAe,EAAE;EAC3D,IAAIa,QAAQ,GAAG,CAAC,CAAC;EACjB,KAAK,MAAMrB,GAAG,IAAIO,YAAY,EAAE;IAC5Bc,QAAQ,CAACrB,GAAG,CAAC,GAAG;MAAEsB,OAAO,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAM,CAAC;EACtD;EACA,KAAK,MAAMvB,GAAG,IAAIQ,eAAe,EAAE;IAC/B,IAAIa,QAAQ,CAACrB,GAAG,CAAC,EAAE;MACfqB,QAAQ,CAACrB,GAAG,CAAC,CAACuB,QAAQ,GAAG,IAAI;IACjC,CAAC,MACI;MACDF,QAAQ,CAACrB,GAAG,CAAC,GAAG;QAAEsB,OAAO,EAAE,KAAK;QAAEC,QAAQ,EAAE;MAAK,CAAC;IACtD;EACJ;EACA,OAAOF,QAAQ;AACnB","ignoreList":[]}