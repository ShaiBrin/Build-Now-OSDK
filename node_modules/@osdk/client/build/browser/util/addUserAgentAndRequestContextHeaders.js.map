{"version":3,"file":"addUserAgentAndRequestContextHeaders.js","names":["createFetchHeaderMutator","addUserAgentAndRequestContextHeaders","client","withMetadata","fetch","headers","set","JSON","stringify","requestContext","osdkMetadata","extraUserAgent"],"sources":["addUserAgentAndRequestContextHeaders.js"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createFetchHeaderMutator } from \"@osdk/shared.net.fetch\";\nexport const addUserAgentAndRequestContextHeaders = (client, withMetadata) => ({\n    ...client,\n    fetch: createFetchHeaderMutator(client.fetch, (headers) => {\n        headers.set(\"X-OSDK-Request-Context\", JSON.stringify(client.requestContext));\n        if (withMetadata.osdkMetadata) {\n            headers.set(\"Fetch-User-Agent\", withMetadata.osdkMetadata.extraUserAgent);\n        }\n        return headers;\n    }),\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,wBAAwB,QAAQ,wBAAwB;AACjE,OAAO,MAAMC,oCAAoC,GAAGA,CAACC,MAAM,EAAEC,YAAY,MAAM;EAC3E,GAAGD,MAAM;EACTE,KAAK,EAAEJ,wBAAwB,CAACE,MAAM,CAACE,KAAK,EAAGC,OAAO,IAAK;IACvDA,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEC,IAAI,CAACC,SAAS,CAACN,MAAM,CAACO,cAAc,CAAC,CAAC;IAC5E,IAAIN,YAAY,CAACO,YAAY,EAAE;MAC3BL,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,YAAY,CAACO,YAAY,CAACC,cAAc,CAAC;IAC7E;IACA,OAAON,OAAO;EAClB,CAAC;AACL,CAAC,CAAC","ignoreList":[]}