{"version":3,"file":"fetchSingle.js","names":["PalantirApiError","fetchPage","fetchSingle","client","objectType","args","objectSet","result","$pageSize","data","length","nextPageToken","fetchSingleWithErrors","value","e","Error","error"],"sources":["fetchSingle.js"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { PalantirApiError } from \"@osdk/shared.net.errors\";\nimport { fetchPage } from \"./fetchPage.js\";\n/** @internal */\nexport async function fetchSingle(client, objectType, args, objectSet) {\n    const result = await fetchPage(client, objectType, { ...args, $pageSize: 1 }, objectSet);\n    if (result.data.length !== 1 || result.nextPageToken != null) {\n        throw new PalantirApiError(`Expected a single result but got ${result.data.length} instead${result.nextPageToken != null ? \" with nextPageToken set\" : \"\"}`);\n    }\n    return result.data[0];\n}\n/** @internal */\nexport async function fetchSingleWithErrors(client, objectType, args, objectSet) {\n    try {\n        const result = await fetchSingle(client, objectType, args, objectSet);\n        return { value: result };\n    }\n    catch (e) {\n        if (e instanceof Error) {\n            return { error: e };\n        }\n        return { error: e };\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,gBAAgB,QAAQ,yBAAyB;AAC1D,SAASC,SAAS,QAAQ,gBAAgB;AAC1C;AACA,OAAO,eAAeC,WAAWA,CAACC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,SAAS,EAAE;EACnE,MAAMC,MAAM,GAAG,MAAMN,SAAS,CAACE,MAAM,EAAEC,UAAU,EAAE;IAAE,GAAGC,IAAI;IAAEG,SAAS,EAAE;EAAE,CAAC,EAAEF,SAAS,CAAC;EACxF,IAAIC,MAAM,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,IAAIH,MAAM,CAACI,aAAa,IAAI,IAAI,EAAE;IAC1D,MAAM,IAAIX,gBAAgB,CAAC,oCAAoCO,MAAM,CAACE,IAAI,CAACC,MAAM,WAAWH,MAAM,CAACI,aAAa,IAAI,IAAI,GAAG,yBAAyB,GAAG,EAAE,EAAE,CAAC;EAChK;EACA,OAAOJ,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC;AACzB;AACA;AACA,OAAO,eAAeG,qBAAqBA,CAACT,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,SAAS,EAAE;EAC7E,IAAI;IACA,MAAMC,MAAM,GAAG,MAAML,WAAW,CAACC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,SAAS,CAAC;IACrE,OAAO;MAAEO,KAAK,EAAEN;IAAO,CAAC;EAC5B,CAAC,CACD,OAAOO,CAAC,EAAE;IACN,IAAIA,CAAC,YAAYC,KAAK,EAAE;MACpB,OAAO;QAAEC,KAAK,EAAEF;MAAE,CAAC;IACvB;IACA,OAAO;MAAEE,KAAK,EAAEF;IAAE,CAAC;EACvB;AACJ","ignoreList":[]}